import{q as e,j as a,L as s,k as l,l as i,a as t,X as r,m as c,n,o as d,P as o}from"./index-BLrbra3w.js";function m({acarsMessages:m,acarsHours:h,setAcarsHours:x,acarsCompactMode:p,setAcarsCompactMode:j,acarsQuickFilters:u,setAcarsQuickFilters:g,expandedMessages:v,setExpandedMessages:N,allMessagesExpanded:b,setAllMessagesExpanded:f}){const C=u.length>0?m.filter(a=>{var s;const l=null==(s=a.label)?void 0:s.toUpperCase();return!!l&&u.some(a=>{var s;return null==(s=e[a])?void 0:s.labels.includes(l)})}):m;return a.jsxs("div",{className:"detail-acars",id:"panel-acars",role:"tabpanel","aria-labelledby":"tab-acars",children:[a.jsxs("div",{className:"acars-filter",children:[a.jsx("label",{htmlFor:"acars-time-range",children:"Time Range:"}),a.jsxs("select",{id:"acars-time-range",value:h,onChange:e=>x(Number(e.target.value)),children:[a.jsx("option",{value:1,children:"Last 1 hour"}),a.jsx("option",{value:6,children:"Last 6 hours"}),a.jsx("option",{value:12,children:"Last 12 hours"}),a.jsx("option",{value:24,children:"Last 24 hours"}),a.jsx("option",{value:48,children:"Last 48 hours"}),a.jsx("option",{value:72,children:"Last 72 hours"}),a.jsx("option",{value:168,children:"Last 7 days"})]}),a.jsxs("div",{className:"acars-view-toggle",role:"group","aria-label":"View mode",children:[a.jsx("button",{className:"acars-view-btn "+(p?"":"active"),onClick:()=>j(!1),title:"Expanded view","aria-label":"Expanded view","aria-pressed":!p,children:a.jsx(s,{size:14,"aria-hidden":"true"})}),a.jsx("button",{className:"acars-view-btn "+(p?"active":""),onClick:()=>j(!0),title:"Compact view","aria-label":"Compact view","aria-pressed":p,children:a.jsx(l,{size:14,"aria-hidden":"true"})})]}),a.jsxs("button",{className:"acars-expand-all-btn",onClick:()=>{f(e=>!e),N({})},title:b?"Collapse all messages":"Expand all messages","aria-expanded":b,children:[b?a.jsx(i,{size:14,"aria-hidden":"true"}):a.jsx(t,{size:14,"aria-hidden":"true"}),b?"Collapse":"Expand"]}),a.jsx("span",{className:"acars-count","aria-live":"polite",children:C.length===m.length?`${m.length} message${1!==m.length?"s":""}`:`${C.length} of ${m.length}`})]}),a.jsxs("div",{className:"acars-quick-filter-chips",role:"group","aria-label":"Message type filters",children:[Object.entries(e).map(([e,{name:s}])=>a.jsxs("button",{className:`acars-filter-chip chip-${e} ${u.includes(e)?"active":""}`,onClick:()=>g(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e]),"aria-pressed":u.includes(e),children:[a.jsx("span",{className:"chip-dot","aria-hidden":"true"}),s]},e)),u.length>0&&a.jsxs("button",{className:"acars-chips-clear",onClick:()=>g([]),"aria-label":"Clear all filters",children:[a.jsx(r,{size:12,"aria-hidden":"true"})," Clear"]})]}),0===C.length?a.jsxs("div",{className:"detail-empty",role:"status",children:[a.jsx(c,{size:48,"aria-hidden":"true"}),a.jsx("p",{children:"No ACARS messages"}),a.jsx("span",{children:u.length>0?"No messages match the selected filters":"No messages received from this aircraft in the selected time range"})]}):a.jsx("ul",{className:"acars-list "+(p?"compact":""),role:"list","aria-label":"ACARS messages",children:C.map((e,s)=>{var l,r;const c="number"==typeof e.timestamp?new Date(1e3*e.timestamp):new Date(e.timestamp),m=n(e.label,e.label_info),h=d(e.label),x=`${e.timestamp}-${s}`,p=b||v[x],j=e.formatted_text||e.text||"",u=j.length>100;return a.jsxs("li",{className:"acars-item"+(h?` category-${h}`:""),children:[a.jsxs("div",{className:"acars-item-header",children:[e.callsign&&a.jsx("span",{className:"acars-item-callsign",children:e.callsign}),(null==(l=e.airline)?void 0:l.name)&&a.jsxs("span",{className:"acars-item-airline",title:e.airline.icao||e.airline.iata,children:[a.jsx(o,{size:12,"aria-hidden":"true"}),e.airline.name]}),a.jsx("span",{className:"acars-item-time",children:a.jsx("time",{dateTime:c.toISOString(),children:c.toLocaleString()})}),a.jsxs("span",{className:"acars-item-label"+(h?` category-${h}`:""),title:(null==(r=e.label_info)?void 0:r.description)||m||e.label,children:[e.label||"--",m&&a.jsx("span",{className:"acars-label-desc",children:m})]}),a.jsx("span",{className:"acars-item-source",children:e.source}),e.frequency&&a.jsxs("span",{className:"acars-item-freq",children:[e.frequency," MHz"]}),a.jsxs("span",{className:"acars-compact-preview",children:[j.slice(0,60),j.length>60?"...":""]})]}),e.icao_hex&&a.jsx("div",{className:"acars-item-aircraft",children:a.jsx("span",{className:"acars-item-icao",children:e.icao_hex})}),e.formatted_text?a.jsxs("div",{className:"acars-formatted-text",children:[a.jsx("div",{className:"acars-formatted-header",children:"Decoded:"}),a.jsx("pre",{className:"acars-item-text "+(!p&&u?"collapsed":""),children:e.formatted_text}),u&&a.jsxs("button",{className:"acars-text-toggle",onClick:()=>N(e=>({...e,[x]:!e[x]})),"aria-expanded":p,children:[p?a.jsx(i,{size:12,"aria-hidden":"true"}):a.jsx(t,{size:12,"aria-hidden":"true"}),p?"Show less":"Show more"]}),e.text&&a.jsxs("details",{className:"acars-raw-toggle",children:[a.jsx("summary",{children:"Raw Message"}),a.jsx("pre",{className:"acars-item-text",children:e.text})]})]}):e.text&&a.jsxs(a.Fragment,{children:[a.jsx("pre",{className:"acars-item-text "+(!p&&u?"collapsed":""),children:e.text}),u&&a.jsxs("button",{className:"acars-text-toggle",onClick:()=>N(e=>({...e,[x]:!e[x]})),"aria-expanded":p,children:[p?a.jsx(i,{size:12,"aria-hidden":"true"}):a.jsx(t,{size:12,"aria-hidden":"true"}),p?"Show less":"Show more"]})]}),e.decoded_text&&Object.keys(e.decoded_text).length>0&&!e.formatted_text&&a.jsxs("div",{className:"acars-item-decoded",children:[e.decoded_text.airports_mentioned&&a.jsxs("span",{className:"decoded-tag",title:"Airports mentioned",children:["✈ ",e.decoded_text.airports_mentioned.join(", ")]}),e.decoded_text.flight_levels&&a.jsxs("span",{className:"decoded-tag",title:"Flight levels",children:["⬆ FL",e.decoded_text.flight_levels.join(", FL")]})]})]},s)})})]})}export{m as AcarsTab};
