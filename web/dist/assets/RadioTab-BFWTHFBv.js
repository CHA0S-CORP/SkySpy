import{j as a,R as s,S as i,d as e,e as r,f as l,h as n,i as t,M as d,a as o}from"./index-Ce3xL2_Q.js";function c({hex:c,radioLoading:h,radioTransmissions:p,filteredRadioTransmissions:x,radioHours:u,setRadioHours:m,radioSearchQuery:j,setRadioSearchQuery:v,radioStatusFilter:N,setRadioStatusFilter:g,radioPlayingId:b,radioAudioProgress:y,radioAudioDurations:f,radioExpandedTranscript:S,setRadioExpandedTranscript:_,radioAutoplay:z,handleRadioPlay:R,handleRadioSeek:L,toggleRadioAutoplay:w}){var C,F;const A=a=>{if(!a)return"--:--";return`${Math.floor(a/60)}:${Math.floor(a%60).toString().padStart(2,"0")}`};return h?a.jsxs("div",{className:"detail-loading",role:"status","aria-busy":"true",children:[a.jsxs("div",{className:"detail-loading-radar",children:[a.jsx(s,{size:32,className:"detail-radar-icon","aria-hidden":"true"}),a.jsx("div",{className:"detail-radar-sweep"})]}),a.jsx("span",{children:"Loading radio transmissions..."})]}):a.jsxs("div",{className:"detail-radio",id:"panel-radio",role:"tabpanel","aria-labelledby":"tab-radio",children:[a.jsxs("div",{className:"radio-toolbar",children:[a.jsxs("div",{className:"radio-filters",children:[a.jsxs("div",{className:"search-box",children:[a.jsx(i,{size:14,"aria-hidden":"true"}),a.jsx("input",{type:"text",placeholder:"Search transcripts...",value:j,onChange:a=>v(a.target.value),"aria-label":"Search radio transcripts"})]}),a.jsxs("select",{className:"radio-select",value:N,onChange:a=>g(a.target.value),"aria-label":"Filter by transcript status",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"transcribed",children:"With Transcript"}),a.jsx("option",{value:"no_transcript",children:"No Transcript"})]}),a.jsxs("select",{className:"radio-select",value:u,onChange:a=>m(Number(a.target.value)),"aria-label":"Select time range",children:[a.jsx("option",{value:1,children:"Last 1h"}),a.jsx("option",{value:6,children:"Last 6h"}),a.jsx("option",{value:12,children:"Last 12h"}),a.jsx("option",{value:24,children:"Last 24h"}),a.jsx("option",{value:48,children:"Last 48h"}),a.jsx("option",{value:168,children:"Last 7d"})]})]}),a.jsxs("div",{className:"radio-controls-right",children:[a.jsxs("button",{className:"radio-autoplay-btn "+(z&&(null==(C=r().autoplayFilter)?void 0:C.hex)===c?"active":""),onClick:w,title:z?"Disable autoplay for this aircraft":"Enable autoplay for this aircraft","aria-pressed":z&&(null==(F=r().autoplayFilter)?void 0:F.hex)===c,children:[a.jsx(e,{size:14,"aria-hidden":"true"}),a.jsx("span",{children:"Auto"})]}),a.jsxs("span",{className:"radio-count","aria-live":"polite",children:[x.length," transmission",1!==x.length?"s":""]})]})]}),0===x.length?a.jsxs("div",{className:"detail-empty",role:"status",children:[a.jsx(l,{size:48,"aria-hidden":"true"}),a.jsx("p",{children:"No radio transmissions"}),a.jsx("span",{children:"No transmissions mentioning this aircraft in the selected time range"})]}):a.jsx("ul",{className:"radio-list",role:"list","aria-label":"Radio transmissions",children:x.map(s=>{const i=s.id,e=b===i,r=y[i]||0,l=f[i]||s.duration_seconds||0,c=S[i];return a.jsxs("li",{className:"radio-item "+(e?"playing":""),children:[a.jsxs("div",{className:"radio-item-main",children:[a.jsx("button",{className:"radio-play-btn "+(e?"playing":""),onClick:()=>R(s),disabled:!s.audio_url,title:s.audio_url?e?"Pause":"Play":"No audio URL","aria-label":e?"Pause audio":"Play audio",children:e?a.jsx(n,{size:18,"aria-hidden":"true"}):a.jsx(t,{size:18,"aria-hidden":"true"})}),a.jsxs("div",{className:"radio-item-info",children:[a.jsxs("div",{className:"radio-item-header",children:[a.jsx("span",{className:"radio-callsign",children:s.matched_callsign}),s.channel_name&&a.jsx("span",{className:"radio-channel",children:s.channel_name}),s.frequency_mhz&&a.jsxs("span",{className:"radio-frequency",children:[s.frequency_mhz.toFixed(3)," MHz"]}),a.jsx("span",{className:"radio-time",children:new Date(s.created_at).toLocaleString()}),a.jsxs("span",{className:"radio-confidence",title:"Match confidence",children:[(100*(s.confidence||0)).toFixed(0),"%"]})]}),a.jsxs("div",{className:"radio-progress-container",onClick:a=>L(i,a),role:"slider","aria-label":"Audio progress","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":r,tabIndex:0,children:[a.jsx("div",{className:"radio-progress-bar",children:a.jsx("div",{className:"radio-progress-fill",style:{width:`${r}%`}})}),a.jsxs("div",{className:"radio-duration",children:[a.jsx("span",{children:A(r/100*l)}),a.jsx("span",{children:A(l)})]})]}),s.transcript?a.jsx("div",{className:"radio-transcript-preview",children:a.jsxs("p",{className:"transcript-preview-text",children:[s.raw_text&&a.jsx("span",{className:"transcript-highlight",children:s.raw_text})," ",s.transcript]})}):a.jsxs("div",{className:"radio-transcript-empty",children:[a.jsx(d,{size:12,"aria-hidden":"true"}),a.jsx("span",{children:"No transcript available"})]})]}),s.transcript&&s.transcript.length>100&&a.jsx("button",{className:"radio-expand-btn "+(c?"expanded":""),onClick:()=>_(a=>({...a,[i]:!a[i]})),"aria-label":c?"Collapse transcript":"Expand transcript","aria-expanded":c,children:a.jsx(o,{size:16,"aria-hidden":"true"})})]}),s.transcript&&c&&a.jsx("div",{className:"radio-transcript-section expanded",children:a.jsxs("div",{className:"radio-transcript",children:[a.jsx("div",{className:"transcript-header",children:a.jsx("span",{className:"transcript-label",children:"Full Transcript"})}),a.jsx("p",{className:"transcript-text",children:s.transcript})]})})]},i)})})]})}export{c as RadioTab};
